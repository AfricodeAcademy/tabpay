{% extends "base.html" %}

{% block heading %}
  Block Reports
{% endblock %}

{% block content %}
<div class="dashboard">
  <div class="container">
    <p class="mt-2 text-gray-600 fs-5">
      Reports showing insights into block dynamics such as, contribution by
      members, overall performance, etc.
    </p>

    <div class="dashboard-content">
      <!-- Tab Navigation -->
      <ul class="nav nav-tabs p-3">
        <li class="nav-item">
          <a
            class="nav-link active"
            data-bs-toggle="tab"
            href="#member-contribution"
            style="color:lightgreen"
          >
            Member Contribution
          </a>
        </li>
      </ul>

      <div class="tab-content ps-5 pb-3 pe-5 pt-1">
        <h4
          style="
            font-weight: 500;
            color: rgb(0, 0, 0);
            letter-spacing: 2px;
            text-decoration: underline;
            font-size: large;
          "
        >
          Filter By:
        </h4>
        <div class="flex-container mt-4">
          <div class="row">
            <div class="col-md-3">
              <select id="block" name="block">
                {% for block in blocks %}
                  <option value="{{ block.name }}">{{ block.name }}</option>
                {% endfor %}
              </select>
            </div>
            <div class="col-md-3">
              <select id="member" name="member">
                {% for member in members %}
                  <option value="{{ member.full_name }}">{{ member.full_name }}</option>
                {% endfor %}
              </select>
            </div>
            <div class="col-md-3">
              <input type="date" id="date" name="date" />
            </div>
            <div class="col-md-3 tt-contributed">
              Total Contributed:
              <span style="color: rgb(14, 169, 14)"> Kes {{ total_contributed }}</span>
            </div>
          </div>
        </div>

        <table class="table table-responsive text-center mt-5">
          <thead>
            <tr>
              <th>Zone</th>
              <th>Host</th>
              <th>Contributed Amount</th>
            </tr>
          </thead>
          <tbody>
            {% for contribution in contributions %}
              <tr>
                <td>{{ contribution.payer.zone.name }}</td>
                <td>{{ contribution.payer.full_name }}</td>
                <td>Kes {{ contribution.amount }}</td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
{% endblock %}